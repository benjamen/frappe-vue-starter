{"version":3,"file":"AdminLayout-Dnd2LleI.js","sources":["../../../../frontend/src/navItems.js","../../../../frontend/src/layouts/AdminLayout.vue"],"sourcesContent":["import { storeToRefs } from \"pinia\";\nimport { usePageConfigStore } from \"@/stores/pageConfig\";\nimport { computed } from \"vue\";\nimport {\n  faTasks, faCogs, faChartPie, faHome, faFile, faList, faDatabase\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst iconMap = {\n  faTasks,\n  faCogs,\n  faChartPie,\n  faHome,\n  faFile,\n  faList,\n  faDatabase,\n  // Add more common icons that might be used in configs\n};\n\nconst baseNavItems = [\n  { name: \"Home\", to: \"/home\", icon: faHome },\n  { name: \"Dashboard\", to: \"/dashboard\", icon: faChartPie },\n  { name: \"Tasks\", to: \"/tasks\", icon: faTasks },\n];\n\nexport function useNavItems() {\n  const pageConfigStore = usePageConfigStore();\n  const { configs } = storeToRefs(pageConfigStore);\n\n  return computed(() => {\n    // Add safety check for configs\n    if (!configs.value || !Array.isArray(configs.value)) {\n      return baseNavItems;\n    }\n\n    const customNav = configs.value\n      .filter(cfg => cfg.published_to_custom_ui) // or whatever flag you use\n      .map(cfg => ({\n        name: cfg.displayName || cfg.title || cfg.name,\n        to: `/form/${cfg.name}/list`,\n        icon: iconMap[cfg.custom_ui_icon] || faHome, // fallback to faHome\n      }))\n      .filter(item => item.name); // Remove items without names\n\n    return [...baseNavItems, ...customNav];\n  });\n}\n","<template>\n  <div class=\"flex min-h-screen bg-gray-50 dark:bg-gray-900\">\n    <!-- Sidebar -->\n    <!-- Hamburger menu button (shows only when sidebar is hidden) -->\n    <Button\n      v-if=\"collapsed\"\n      @click=\"collapsed = false\"\n      variant=\"light\"\n      icon-left=\"menu\"\n      class=\"absolute top-4 left-4 z-50\"\n    />\n    <aside\n      :class=\"[\n        'transition-all duration-300 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700',\n        collapsed ? 'hidden' : 'block',\n      ]\"\n    >\n      <div\n        class=\"h-16 flex items-center justify-between px-4 border-b dark:border-gray-700\"\n      >\n        <span class=\"text-xl font-semibold text-gray-800 dark:text-gray-200\"\n          >MyApp</span\n        >\n        <Button\n          @click=\"collapsed = !collapsed\"\n          variant=\"light\"\n          :icon-left=\"collapsed ? 'chevron-right' : 'chevron-left'\"\n        />\n      </div>\n      <nav class=\"p-4 space-y-2\">\n        <router-link\n          v-for=\"item in navItems\"\n          :key=\"item.name\"\n          :to=\"item.to\"\n          class=\"flex items-center px-3 py-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n          :class=\"{\n            'bg-gray-100 dark:bg-gray-700 font-medium': isActive(item.to),\n          }\"\n        >\n          <fa-icon :icon=\"item.icon\" class=\"mr-3\" />\n          {{ item.name }}\n        </router-link>\n      </nav>\n    </aside>\n\n    <!-- Content -->\n    <div class=\"flex flex-col flex-1\">\n      <!-- Top bar -->\n      <header\n        class=\"h-16 flex items-center justify-end px-6 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\"\n      >\n        <div class=\"flex items-center gap-2\">\n          <!-- Settings Dropdown -->\n          <div class=\"relative\" v-if=\"isLoggedIn\">\n            <button\n              @click=\"showSettingsMenu = !showSettingsMenu\"\n              class=\"flex items-center gap-2 px-3 py-2 text-gray-800 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n            >\n              <span class=\"text-sm\">‚öôÔ∏è</span>\n              <span class=\"text-xs\">{{ showSettingsMenu ? \"‚ñ≤\" : \"‚ñº\" }}</span>\n            </button>\n\n            <!-- Dropdown Menu -->\n            <div\n              v-if=\"showSettingsMenu\"\n              @click=\"showSettingsMenu = false\"\n              class=\"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50 py-1\"\n            >\n              <router-link\n                to=\"/settings\"\n                class=\"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n              >\n                <span class=\"text-sm\">‚öôÔ∏è</span>\n                Settings\n              </router-link>\n              <hr class=\"my-1 border-gray-200 dark:border-gray-700\" />\n              <button\n                @click=\"logout\"\n                class=\"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\"\n              >\n                <span class=\"text-sm\">üö™</span>\n                Logout\n              </button>\n            </div>\n          </div>\n\n          <!-- Dark Mode Toggle -->\n          <button\n            @click=\"toggleDarkMode\"\n            class=\"p-2 text-gray-800 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n            :title=\"dark ? 'Switch to light mode' : 'Switch to dark mode'\"\n          >\n            <span class=\"text-lg\">{{ dark ? \"üåô\" : \"‚òÄÔ∏è\" }}</span>\n          </button>\n\n          <!-- Login Button (when not logged in) -->\n          <button\n            v-if=\"!isLoggedIn\"\n            @click=\"router.push('/account/login')\"\n            class=\"ml-2 px-3 py-2 text-gray-800 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n          >\n            <span class=\"text-sm\">üîë</span> Login\n          </button>\n        </div>\n      </header>\n\n      <!-- Main content -->\n      <main class=\"p-6 flex-1 bg-gray-50 dark:bg-gray-900\">\n        <router-view />\n      </main>\n    </div>\n\n    <!-- Click outside to close settings menu -->\n    <div\n      v-if=\"showSettingsMenu\"\n      @click=\"showSettingsMenu = false\"\n      class=\"fixed inset-0 z-40\"\n    ></div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport { session } from \"../data/session\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport { usePageConfigStore } from \"@/stores/pageConfig\";\nimport { useNavItems } from \"@/navItems\";\n\nconst navItems = useNavItems(); // already a computed ref!\n\nconst collapsed = ref(false);\nconst dark = ref(document.documentElement.classList.contains(\"dark\"));\nconst showSettingsMenu = ref(false);\nconst route = useRoute();\nconst router = useRouter();\n\nconst isActive = (path) => route.path === path;\nconst isLoggedIn = computed(() => session.isLoggedIn);\n\n// Handle profile click with loading state\nconst handleProfileClick = (event) => {\n  showSettingsMenu.value = false;\n  // Loading state will be reset when page navigates away\n};\n\n// FETCH page configs on mount if not already loaded\nconst pageConfigStore = usePageConfigStore();\nonMounted(() => {\n  pageConfigStore.fetchConfigs();\n});\n\nfunction toggleDarkMode() {\n  dark.value = !dark.value;\n  if (dark.value) {\n    document.documentElement.classList.add(\"dark\");\n  } else {\n    document.documentElement.classList.remove(\"dark\");\n  }\n  window.dispatchEvent(\n    new CustomEvent(\"darkModeChanged\", {\n      detail: { enabled: dark.value },\n    })\n  );\n}\n\nasync function logout() {\n  showSettingsMenu.value = false;\n  await session.logout.submit();\n}\n</script>\n"],"names":["iconMap","faTasks","faCogs","faChartPie","faHome","faFile","faList","faDatabase","baseNavItems","useNavItems","pageConfigStore","usePageConfigStore","configs","storeToRefs","computed","customNav","cfg","item","navItems","collapsed","ref","dark","showSettingsMenu","route","useRoute","router","useRouter","isActive","path","isLoggedIn","session","onMounted","toggleDarkMode","logout","_openBlock","_createElementBlock","_hoisted_1","_createBlock","_component_Button","_createElementVNode","_normalizeClass","_hoisted_2","_cache","_createVNode","$event","_hoisted_3","_Fragment","_renderList","_unref","_component_router_link","_component_fa_icon","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_hoisted_11","_component_router_view"],"mappings":"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"}